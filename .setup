#!/bin/bash

#-----------------------------------------------------------------------------
# boilerplate.sh
#-----------------------------------------------------------------------------

# get current path
HERE="$(dirname ${BASH_SOURCE[0]})"
if which realpath |& /dev/null
then
	HERE="$(realpath ${HERE})"
elif which readlink |& /dev/null
then
	HERE="$(readlink -f ${HERE})"
else
	echo "FATAL | cannot determine script absolute path"
	exit 255
fi
OK=KO
echo "HERE | ${HERE}"

SEARCH_PATH=("${HERE}" "${HERE}"/lib "${HERE}"/.. "${HERE}"/../lib .)
MODULES=(logger.include color.include)

for module in "${MODULES[@]}"
do
	for here in "${SEARCH_PATH[@]}"
	do
		printf "TRY  | . %-50.50s" "${here}/${module}"
		if . "${here}/${module}" &> /dev/null
		then
			OK=OK
			echo "| OK   | . ${here}/${module}"
			break
		fi
		echo "| FAIL | . ${here}/${module}"
	done
done

[ "${OK}" == OK ] || {
	echo "FATAL | cannot find logger.include"
	exit 255
}
#
#	setup variables and log level
#
HERE="$(dirname ${BASH_SOURCE[0]})"
NAME="$(basename ${BASH_SOURCE[0]})"	# save this script name
info "HERE | $HERE"
info "NAME | $NAME"
logger_setlevel info

#-----------------------------------------------------------------------------
# boilerplate.sh
#-----------------------------------------------------------------------------
